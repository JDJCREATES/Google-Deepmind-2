# Ships* Artifact System Documentation

> **Purpose**: This document defines all artifacts in the `.ships/` directory, their purposes, and how they support the LLM coding workflow.

---

## ğŸ“‚ Artifact Overview

| Artifact | Type | Source | Mutability | Purpose |
|----------|------|--------|------------|---------|
| `file_tree.json` | **Ground Truth** | Auto-scanned (tree-sitter) | Read-only | Current actual project structure |
| `folder_map_plan.json` | **Plan** | Planner Agent | LLM-editable | Planned architecture for current task |
| `implementation_plan.md` | **Plan** | Planner Agent | LLM-editable | High-level design and task breakdown |
| `task_list.json` | **Tracker** | Planner Agent | LLM-editable | Task checklist with completion status |
| `plan_manifest.json` | **Metadata** | Planner Agent | Auto-updated | Plan metadata, intent, timestamps |
| `api_contracts.json` | **Reference** | Coder Agent | LLM-editable | Type definitions, API schemas |
| `dependency_plan.json` | **Plan** | Planner Agent | LLM-editable | Dependency graph and build order |
| `planner_status.json` | **State** | System | Auto-updated | Planner state and progress |
| `risk_report.json` | **Report** | Validator Agent | Auto-updated | Security/quality issues found |

---

## ğŸ—‚ï¸ Detailed Artifact Descriptions

### 1. `file_tree.json` â€” Ground Truth
**Source**: Auto-generated by tree-sitter scan  
**Mutability**: âŒ Read-only (regenerated on each scan)

The **actual current state** of the project's file structure. Scanned automatically before each Planner invocation.

```json
{
  "success": true,
  "entries": [
    {"path": "src/App.tsx", "type": "file", "definitions": ["App", "useAuth"]},
    {"path": "src/components", "type": "directory"}
  ],
  "stats": {"files": 45, "directories": 12}
}
```

**Usage**:
- Planner uses this as ground truth for what EXISTS
- Prevents hallucinating non-existent files
- Coder uses this to verify target paths

---

### 2. `folder_map_plan.json` â€” Planned Architecture *(renamed from folder_map.json)*
**Source**: Planner Agent  
**Mutability**: âœ… LLM-editable

The **planned file structure** for the current task. This is the Planner's vision of what WILL be built.

```json
{
  "folders": {
    "src/components/auth": {
      "purpose": "Authentication UI components",
      "files": ["LoginForm.tsx", "SignupForm.tsx"]
    }
  },
  "planned_files": [
    {"path": "src/components/auth/LoginForm.tsx", "status": "pending"}
  ]
}
```

**Usage**:
- Coder references this to know WHERE to create files
- Can be updated during execution (files added/removed)
- Status can be: `pending`, `in_progress`, `complete`, `skipped`

---

### 3. `implementation_plan.md` â€” Design Document
**Source**: Planner Agent  
**Mutability**: âœ… LLM-editable

Human-readable markdown describing **what** will be built and **how**.

**Usage**:
- Coder references for context and decisions
- Can add notes/updates during execution
- Tracks design rationale and tradeoffs

---

### 4. `task_list.json` â€” Task Tracker
**Source**: Planner Agent  
**Mutability**: âœ… LLM-editable

Structured task list with completion tracking.

```json
{
  "tasks": [
    {"id": "1", "title": "Create LoginForm component", "status": "complete"},
    {"id": "2", "title": "Add form validation", "status": "in_progress"},
    {"id": "3", "title": "Connect to auth API", "status": "pending"}
  ]
}
```

**Statuses**: `pending`, `in_progress`, `complete`, `blocked`, `skipped`

**Usage**:
- Orchestrator uses to determine next task
- Coder marks tasks complete after implementation
- Validator can mark tasks as needing fixes

---

### 5. `plan_manifest.json` â€” Plan Metadata
**Source**: Planner Agent  
**Mutability**: âš™ï¸ Auto-updated

Metadata about the current plan (not the plan itself).

```json
{
  "user_goal": "Add user authentication",
  "intent_summary": "Implement login/signup with JWT",
  "created_at": "2026-01-13T21:00:00Z",
  "version": 1,
  "task_count": 5
}
```

---

### 6. `api_contracts.json` â€” Type Definitions
**Source**: Coder Agent  
**Mutability**: âœ… LLM-editable

Shared type definitions and API schemas for consistency.

---

## ğŸ”„ Artifact Lifecycle

```
User Request
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ORCHESTRATOR              â”‚
â”‚   - Refresh file_tree.json  â”‚ â† Auto-scan (read-only)
â”‚   - Detect intent change    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PLANNER                   â”‚
â”‚   - Create/update:          â”‚
â”‚     â€¢ implementation_plan.mdâ”‚ â† LLM writes
â”‚     â€¢ folder_map_plan.json  â”‚ â† LLM writes
â”‚     â€¢ task_list.json        â”‚ â† LLM writes
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CODER                     â”‚
â”‚   - Read: file_tree.json    â”‚ â† Ground truth
â”‚   - Read: folder_map_plan   â”‚ â† Where to create
â”‚   - Read: task_list.json    â”‚ â† What to do
â”‚   - Update: task_list.json  â”‚ â† Mark complete
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   VALIDATOR                 â”‚
â”‚   - Refresh file_tree.json  â”‚ â† Verify files created
â”‚   - Update: risk_report.jsonâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ Key Naming Change

| Old Name | New Name | Reason |
|----------|----------|--------|
| `folder_map.json` | `folder_map_plan.json` | Clarify it's a PLAN, not ground truth |

The old name was confusing because `folder_map` sounds like it represents actual files, but it's really the **planned architecture** created by the Planner.

---

## ğŸ› ï¸ LLM Editing Rules

1. **file_tree.json** â€” NEVER edit. Auto-regenerated.
2. **folder_map_plan.json** â€” Edit to add/remove planned files, update statuses
3. **implementation_plan.md** â€” Add notes, update sections as work progresses
4. **task_list.json** â€” Update task statuses as work completes
5. **plan_manifest.json** â€” Auto-updated, don't manually edit
